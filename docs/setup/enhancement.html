<!DOCTYPE html>
<html lang="en">
<head>
  <title>Ebean ORM Setup</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <link rel="shortcut icon" href="/images/favicon.ico" >
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/pygments.css" type="text/css" />
  <link rel="stylesheet" href="/css/site.css">
</head>
<body>
<div id="wrap">
  <div id="header">
    <div class="navbar" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".mobile-nav">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">
            <img src="/images/lg5-21x100.png" height="35">
          </a>
        </div>
        <div class="collapse navbar-collapse">
<ul class="nav navbar-nav pull-right nav-btn-rhs">
  <li ><a href="/"><span class="fas fa-home"></span> Home</a></li>
  <li class="active"><a href="/docs">Docs</a></li>
  <li ><a href="/docs/getting-started">Get Started</a></li>
  <li ><a href="/support">Help</a></li>
  <li ><a href="/videos">Videos</a></li>
  <li ><a target="_blank" href="/apidoc/12">ApiDocs</a></li>
  <li ><a href="/releases">Releases</a></li>
  <li><a target="_blank" href="https://github.com/ebean-orm/ebean"> <i class="fab fa-github"></i></a></li>
</ul>
        </div>
        <div class="mobile-nav">
<ul class="nav navbar-nav pull-right nav-btn-rhs">
  <li ><a href="/"><span class="fas fa-home"></span> Home</a></li>
  <li class="active"><a href="/docs">Docs</a></li>
  <li ><a href="/docs/getting-started">Get Started</a></li>
  <li ><a href="/support">Help</a></li>
  <li ><a href="/videos">Videos</a></li>
  <li ><a target="_blank" href="/apidoc/12">ApiDocs</a></li>
  <li ><a href="/releases">Releases</a></li>
  <li><a target="_blank" href="https://github.com/ebean-orm/ebean"> <i class="fab fa-github"></i></a></li>
</ul>
        </div>
      </div>
    </div>

  </div>
  <div id="main">
    
<div class="jumbotron mini">
  <div class="container">
    <h1><a href="/docs">Documentation</a> / <a href="/docs/setup">Setup</a> / Enhancement </h1>
  </div>
</div>

<div class="container doc-index bs-docs-container">

  <div class="row">

    <div class="col-md-9" role="main">
      
<div class="bs-docs-section">

  <h2>Videos</h2>
  <div class="row">
    <div class="col-md-6">
<div class="media ">
  <div class="media-left">
    <div class="media-left">
    <a href="https://youtu.be/q-SB_X_X-GU">
      <img src="/images/movies-64.png" width="64" height="64" >
    </a>
    </div>
  </div>
  <div class="media-body">
    <h4 class="media-heading">Maven enhancement</h4>
  Enhancement of entity and query beans using the maven enhancement tile
  </div>
</div>
    </div>
  </div>
  <div class="row mvm">
    <div class="col-md-6">
<div class="media ">
  <div class="media-left">
    <div class="media-left">
    <a href="https://youtu.be/o4kmglM48Vc">
      <img src="/images/movies-64.png" width="64" height="64" >
    </a>
    </div>
  </div>
  <div class="media-body">
    <h4 class="media-heading">IntelliJ plugin</h4>
  Enhancement using the IntelliJ IDEA plugin
  </div>
</div>
    </div>
    <div class="col-md-6">
<div class="media ">
  <div class="media-left">
    <div class="media-left">
    <a href="https://youtu.be/49vKdpbUl-0">
      <img src="/images/movies-64.png" width="64" height="64" >
    </a>
    </div>
  </div>
  <div class="media-body">
    <h4 class="media-heading">IntelliJ debugger</h4>
  Looks at Idea debugger setting that invokes lazy loading
  </div>
</div>
    </div>
  </div>
  <div class="row mvm">
    <div class="col-md-6">
<div class="media ">
  <div class="media-left">
    <div class="media-left">
    <a href="https://youtu.be/_DWxNj-_orA">
      <img src="/images/movies-64.png" width="64" height="64" >
    </a>
    </div>
  </div>
  <div class="media-body">
    <h4 class="media-heading">Eclipse plugin</h4>
  Enhancement using the Eclipse plugin
  </div>
</div>
    </div>
    <div class="col-md-6">
<div class="media ">
  <div class="media-left">
    <div class="media-left">
    <a href="https://youtu.be/20dvi_oqVus">
      <img src="/images/movies-64.png" width="64" height="64" >
    </a>
    </div>
  </div>
  <div class="media-body">
    <h4 class="media-heading">Eclipse APT</h4>
  Eclipse setup for Query bean generation (via Java annotation processor).
  </div>
</div>
    </div>
  </div>

  <h2 id="recommendation">Recommendation</h2>
  <blockquote>
    Use <b>both</b> IDE plugin enhancement (Idea or Eclipse) plus build time enhancement.
  </blockquote>
  <p>
    For IntelliJ IDEA and Eclipse users my recommendation is to use the IDE plugin in addition
    to either build time enhancement (maven plugin) or agent.
  </p>
  <p>
    That is, the IDE plugin is good to use during development enhancing the beans as the IDE compiles the
    classes. Using the IDE plugin can reduce enhancement hassles during development and unit testing.
    For production you can then choose between build time enhancement via say maven or run time
    enhancement via javaagent.
  </p>

  <h2 id="overview">Overview</h2>

  <p>The term "Enhancement" covers all the ways (javaagent, ant, maven,IDE plugin, etc)
    that are used to modify the entity beans. Others terms used to describe enhancement include "Weaving",
    "Transformation" and "byte code manipulation".</p>

  <p>Load time weaving is used to refer to when the class manipulation occurs at "load
    time" typically via javaagent compared with class manipulation occurring at "build time"
    typically via Maven, Ant or IDE plugin.</p>

  <p>In raw terms a class is a byte[] and enhancement is manipulating those bytes prior to
    the class being defined by its ClassLoader.</p>


  <h2 id="multiple">Using multiple enhancers</h2>

  <p>
  Ebean enhancement is aware of when the enhancement has already occurred. In this way it is common
    and expected that multiple forms of enhancement can be used at the same time such as using both
    an IDE plugin and maven plugin to perform the enhancement.
  </p>


  <h2 id="maven">Maven enhancement</h2>

  <p>
    A Maven plugin performs the enhancement as part of the maven compile process.
    This can be described as "build time enhancement".
  </p>

  <h3>Maven enhancement tile</h3>
  <p>
    Ebean supplies a maven tile that brings in both the enhancer for entity beans as well
    as the enhancement for query beans. This is simpler, cleaner less verbose than
    defining the plugin in the traditional (non-tile) fashion and now the preferred approach.
  </p>

  <h5>The ebean enhancement tile brings plugin configuration for:</h5>
  <ul>
    <li>Entity bean and @Transactional enhancement for main and test</li>
    <li>Query bean enhancement for main and test</li>
    <li>ebean-codegen plugin, helper to generate finders etc</li>
  </ul>


  <h5>ebean enhancement tile</h5>
  <div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>io.repaint.maven<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>tiles-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.16<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;extensions&gt;</span>true<span class="nt">&lt;/extensions&gt;</span>
  <span class="nt">&lt;configuration&gt;</span>
    <span class="nt">&lt;tiles&gt;</span>
      <span class="c">&lt;!-- other tiles ... --&gt;</span>
      <span class="nt">&lt;tile&gt;</span>io.ebean.tile:enhancement:12.1.9<span class="nt">&lt;/tile&gt;</span>
    <span class="nt">&lt;/tiles&gt;</span>
  <span class="nt">&lt;/configuration&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</pre></div>
</div>
  <p>
    Use <code>mvn help:effective-pom</code> to view the plugins that the tile brings in.
  </p>

  <h3>Maven plugin</h3>
  <p>
    If you do not want to use maven tiles you can specify the maven enhancement
    plugin in 'normal' fashion. Note the unlike the tile this does not bring in the
    <a href="/docs/query/typesafe#enhancement">query bean enhancement</a>.
  </p>

  <div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;plugin&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>io.ebean<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>ebean-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span><span class='ebean-maven-plugin-version'>${version}</span><span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;executions&gt;</span>
    <span class="nt">&lt;execution&gt;</span>
      <span class="nt">&lt;id&gt;</span>main<span class="nt">&lt;/id&gt;</span>
      <span class="nt">&lt;phase&gt;</span>process-classes<span class="nt">&lt;/phase&gt;</span>
      <span class="nt">&lt;configuration&gt;</span>
        <span class="nt">&lt;transformArgs&gt;</span>debug=1<span class="nt">&lt;/transformArgs&gt;</span>
      <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;goals&gt;</span>
        <span class="nt">&lt;goal&gt;</span>enhance<span class="nt">&lt;/goal&gt;</span>
      <span class="nt">&lt;/goals&gt;</span>
    <span class="nt">&lt;/execution&gt;</span>
  <span class="nt">&lt;/executions&gt;</span>
<span class="nt">&lt;/plugin&gt;</span>
</pre></div>
</div>



  <div style="display: none">
    <h2 id="maven_eclipse">Eclipse + Maven enhancement</h2>

    <p>Eclipse can be configured to enhance the classes during build using maven configuration</p>

      <div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;build&gt;</span>
  <span class="nt">&lt;plugins&gt;</span>
    <span class="c">&lt;!-- plugins here --&gt;</span>
  <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;pluginManagement&gt;</span>
    <span class="nt">&lt;plugins&gt;</span>
      <span class="c">&lt;!--This plugin&#39;s configuration is used to store Eclipse m2e settings only. It has no influence on the Maven build itself. --&gt;</span>
      <span class="nt">&lt;plugin&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>org.eclipse.m2e<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>lifecycle-mapping<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>1.0.0<span class="nt">&lt;/version&gt;</span>
        <span class="nt">&lt;configuration&gt;</span>
          <span class="nt">&lt;lifecycleMappingMetadata&gt;</span>
            <span class="nt">&lt;pluginExecutions&gt;</span>
              <span class="nt">&lt;pluginExecution&gt;</span>
                <span class="nt">&lt;pluginExecutionFilter&gt;</span>
                  <span class="nt">&lt;groupId&gt;</span>io.ebean<span class="nt">&lt;/groupId&gt;</span>
                  <span class="nt">&lt;artifactId&gt;</span>ebean-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
                  <span class="nt">&lt;versionRange&gt;</span>[<span class='ebean-maven-plugin-version'>${version}</span>,)<span class="nt">&lt;/versionRange&gt;</span>
                  <span class="nt">&lt;goals&gt;</span>
                    <span class="nt">&lt;goal&gt;</span>enhance<span class="nt">&lt;/goal&gt;</span>
                  <span class="nt">&lt;/goals&gt;</span>
                <span class="nt">&lt;/pluginExecutionFilter&gt;</span>
                <span class="nt">&lt;action&gt;</span>
                  <span class="nt">&lt;execute&gt;</span>
                    <span class="nt">&lt;runOnConfiguration&gt;</span>true<span class="nt">&lt;/runOnConfiguration&gt;</span>
                    <span class="nt">&lt;runOnIncremental&gt;</span>true<span class="nt">&lt;/runOnIncremental&gt;</span>
                  <span class="nt">&lt;/execute&gt;</span>
                <span class="nt">&lt;/action&gt;</span>
              <span class="nt">&lt;/pluginExecution&gt;</span>
            <span class="nt">&lt;/pluginExecutions&gt;</span>
          <span class="nt">&lt;/lifecycleMappingMetadata&gt;</span>
        <span class="nt">&lt;/configuration&gt;</span>
      <span class="nt">&lt;/plugin&gt;</span>
    <span class="nt">&lt;/plugins&gt;</span>
  <span class="nt">&lt;/pluginManagement&gt;</span>
<span class="nt">&lt;/build&gt;</span>
</pre></div>
</div>

  </div>

  <h2 id="agent">Agent</h2>
  <p>
    You can use <code>javaagent</code> parameter on the command line as per the examples below.
    This is often described as "Runtime enhancement" or "Load time enhancement".
  </p>

  <p>
    Note that since version 4.7.1 of ebean-agent is expected that the agent
    will perform well without specifying the packages to enhance. That is, the agent is pretty good
    at ignoring non-interesting classes (JDK, groovy, scala, kotlin, jdbc drivers and many common
    libraries from apache, google, testing etc.
  </p>

<div class="syntax xml"><div class="highlight"><pre><span></span>java -javaagent:ebean-agent-<span class='ebean-maven-plugin-version'>${version}</span>.jar MyApplication
java -javaagent:ebean-agent-<span class='ebean-maven-plugin-version'>${version}</span>.jar=debug=3 MyApplication
</pre></div>
</div>


  <p>
    The ebean-agent jar can be downloaded from maven. The current version is:
  </p>


  <div role="tabpanel">

    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#Maven4" aria-controls="Maven4" role="tab" data-toggle="tab">Maven</a></li>
      <li role="presentation"><a href="#Ivy4" aria-controls="Ivy4" role="tab" data-toggle="tab">Ivy</a></li>
      <li role="presentation"><a href="#Grape4" aria-controls="Grape4" role="tab" data-toggle="tab">Grape</a></li>
      <li role="presentation"><a href="#Gradle4" aria-controls="Gradle4" role="tab" data-toggle="tab">Gradle</a></li>
      <li role="presentation"><a href="#Buildr4" aria-controls="Buildr4" role="tab" data-toggle="tab">Buildr</a></li>
      <li role="presentation"><a href="#SBT4" aria-controls="SBT4" role="tab" data-toggle="tab">SBT</a></li>
      <li role="presentation"><a href="#Leiningen4" aria-controls="Leiningen4" role="tab" data-toggle="tab">Leiningen</a></li>
    </ul>

    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="Maven4">
<div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>&#36;{groupid}<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>&#36;{artifactid}<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>&#36;{version_str}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Ivy4">
<div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency</span> <span class="na">org=</span><span class="s">&quot;&#36;{groupid}&quot;</span> <span class="na">name=</span><span class="s">&quot;&#36;{artifactid}&quot;</span> <span class="na">rev=</span><span class="s">&quot;&#36;{version_str}&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Grape4">
<div class="syntax groovy"><div class="highlight"><pre><span></span><span class="nd">@Grapes</span><span class="o">(</span>
  <span class="nd">@Grab</span><span class="o">(</span><span class="n">group</span><span class="o">=</span><span class="s1">&#39;&#36;{groupid}&#39;</span><span class="o">,</span> <span class="n">module</span><span class="o">=</span><span class="s1">&#39;&#36;{artifactid}&#39;</span><span class="o">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;&#36;{version_str}&#39;</span><span class="o">)</span>
<span class="o">)</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Gradle4">
<div class="syntax groovy"><div class="highlight"><pre><span></span><span class="s1">&#39;&#36;{groupid}:&#36;{artifactid}:&#36;{version_str}&#39;</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Buildr4">
<div class="syntax groovy"><div class="highlight"><pre><span></span><span class="s1">&#39;&#36;{groupid}:&#36;{artifactid}:&#36;{version_str}&#39;</span>
</pre></div>
</div>    </div>
      <div role="tabpanel" class="tab-pane" id="SBT4">
<div class="syntax scala"><div class="highlight"><pre><span></span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;&#36;{groupid}&quot;</span> <span class="o">%</span> <span class="s">&quot;&#36;{artifactid}&quot;</span> <span class="o">%</span> <span class="s">&quot;&#36;{version_str}&quot;</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Leiningen4">
<div class="syntax xml"><div class="highlight"><pre><span></span>[&#36;{groupid}/&#36;{artifactid} &quot;&#36;{version_str}&quot;]
</pre></div>
</div>
      </div>
    </div>


  </div>

  <h2 id="agent_loader">Agent Loader</h2>
  <div class="alert alert-danger">
    Agent Loader is NOT recommended
  </div>
  <p>
    The agent loader can be used to programmatically load the javaagent onto a running JVM. However,
    this very occasionally does not enhance a bean as an entity bean class somehow gets loaded prior
    to the agent being loaded on the JVM and for this reason this is not a recommended approach.
  </p>

  <p>
    Note that this approach is used in the testing code for Ebean itself and if you use this approach you
    need to make sure the agent loading occurs before any class loading of entity beans or transactional beans occurs.
  </p>


  <div role="tabpanel">

    <ul class="nav nav-tabs" role="tablist">
      <li role="presentation" class="active"><a href="#Maven3" aria-controls="Maven3" role="tab" data-toggle="tab">Maven</a></li>
      <li role="presentation"><a href="#Ivy3" aria-controls="Ivy3" role="tab" data-toggle="tab">Ivy</a></li>
      <li role="presentation"><a href="#Grape3" aria-controls="Grape3" role="tab" data-toggle="tab">Grape</a></li>
      <li role="presentation"><a href="#Gradle3" aria-controls="Gradle3" role="tab" data-toggle="tab">Gradle</a></li>
      <li role="presentation"><a href="#Buildr3" aria-controls="Buildr3" role="tab" data-toggle="tab">Buildr</a></li>
      <li role="presentation"><a href="#SBT3" aria-controls="SBT3" role="tab" data-toggle="tab">SBT</a></li>
      <li role="presentation"><a href="#Leiningen3" aria-controls="Leiningen3" role="tab" data-toggle="tab">Leiningen</a></li>
    </ul>

    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="Maven3">
<div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>&#36;{groupid}<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>&#36;{artifactid}<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>&#36;{version_str}<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Ivy3">
<div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;dependency</span> <span class="na">org=</span><span class="s">&quot;&#36;{groupid}&quot;</span> <span class="na">name=</span><span class="s">&quot;&#36;{artifactid}&quot;</span> <span class="na">rev=</span><span class="s">&quot;&#36;{version_str}&quot;</span><span class="nt">/&gt;</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Grape3">
<div class="syntax groovy"><div class="highlight"><pre><span></span><span class="nd">@Grapes</span><span class="o">(</span>
  <span class="nd">@Grab</span><span class="o">(</span><span class="n">group</span><span class="o">=</span><span class="s1">&#39;&#36;{groupid}&#39;</span><span class="o">,</span> <span class="n">module</span><span class="o">=</span><span class="s1">&#39;&#36;{artifactid}&#39;</span><span class="o">,</span> <span class="n">version</span><span class="o">=</span><span class="s1">&#39;&#36;{version_str}&#39;</span><span class="o">)</span>
<span class="o">)</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Gradle3">
<div class="syntax groovy"><div class="highlight"><pre><span></span><span class="s1">&#39;&#36;{groupid}:&#36;{artifactid}:&#36;{version_str}&#39;</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Buildr3">
<div class="syntax groovy"><div class="highlight"><pre><span></span><span class="s1">&#39;&#36;{groupid}:&#36;{artifactid}:&#36;{version_str}&#39;</span>
</pre></div>
</div>    </div>
      <div role="tabpanel" class="tab-pane" id="SBT3">
<div class="syntax scala"><div class="highlight"><pre><span></span><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;&#36;{groupid}&quot;</span> <span class="o">%</span> <span class="s">&quot;&#36;{artifactid}&quot;</span> <span class="o">%</span> <span class="s">&quot;&#36;{version_str}&quot;</span>
</pre></div>
</div>
      </div>
      <div role="tabpanel" class="tab-pane" id="Leiningen3">
<div class="syntax xml"><div class="highlight"><pre><span></span>[&#36;{groupid}/&#36;{artifactid} &quot;&#36;{version_str}&quot;]
</pre></div>
</div>
      </div>
    </div>


  </div>

  <p>
    The code below loads the enhancer agent programmatically onto the running JVM.
  </p>

  <div class="syntax java"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">org.avaje.agentloader</span><span class="o">;</span>
<span class="o">...</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">someApplicationBootupMethod</span><span class="o">()</span> <span class="o">{</span>
  <span class="c1">// Load the agent into the running JVM process</span>
  <span class="k">if</span> <span class="o">(!</span><span class="n">AgentLoader</span><span class="o">.</span><span class="na">loadAgentFromClasspath</span><span class="o">(</span><span class="s">&quot;ebean-agent&quot;</span><span class="o">,</span><span class="s">&quot;debug=1;packages=org.example.model&quot;</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&quot;ebean-agent not found in classpath - not dynamically loaded&quot;</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>


  <h2 id="ant">Ant enhancement</h2>

  <p>Modify your ant build.xml file to: </p>

  <ol>
    <li>Define the AntEnhanceTask.</li>
    <li>Create a target that uses the AntEnhanceTask to enhance the entity classes.</li>
  </ol>

  <div class="syntax xml"><div class="highlight"><pre><span></span><span class="nt">&lt;taskdef</span>
    <span class="na">name=</span><span class="s">&quot;ebeanEnhance&quot;</span>
    <span class="na">classname=</span><span class="s">&quot;io.ebean.enhance.ant.AntEnhanceTask&quot;</span>
    <span class="na">classpath=</span><span class="s">&quot;your_path_to/ebean-x.x.x.jar&quot;</span><span class="nt">/&gt;</span>

<span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;ormEnhance&quot;</span> <span class="na">depends=</span><span class="s">&quot;clean,compile&quot;</span><span class="nt">&gt;</span>
  <span class="c">&lt;!--</span>
<span class="c">  classSource: This is the directory that contains your class files. That is, the directory where your IDE will compile your java class files to, or the directory where a previous ant task will compile your java class files to.</span>

<span class="c">  packages: a comma delimited list of packages that contain entity classes. All the classes in these packages are searched for entity classes to be enhanced. transformArgs: This contains a debug level (0 - 10) .</span>
<span class="c">  --&gt;</span>
  <span class="nt">&lt;ebeanEnhance</span>
      <span class="na">classSource=</span><span class="s">&quot;your_classes_directory&quot;</span>
      <span class="na">packages=</span><span class="s">&quot;app.domain.*&quot;</span>
      <span class="na">transformArgs=</span><span class="s">&quot;debug=1&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/target&gt;</span>
</pre></div>
</div>

<div style="display: none">
  <h2>Programmatic enhancement</h2>

  <p>
    You can run the enhancement yourself programmatically using the Transformer class from the agent.
  </p>

  <div class="syntax java"><div class="highlight"><pre><span></span><span class="n">Transformer</span> <span class="n">transformer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Transformer</span><span class="o">(</span><span class="s">&quot;&quot;</span><span class="o">,</span> <span class="s">&quot;debug=1&quot;</span><span class="o">);</span>
<span class="n">InputStreamTransform</span> <span class="n">streamTransform</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InputStreamTransform</span><span class="o">(</span><span class="n">transformer</span><span class="o">,</span> <span class="n">Ebean</span><span class="o">.</span><span class="na field">class</span><span class="o">.</span><span class="na">getClassLoader</span><span class="o">());</span>

<span class="c1">// Or use ASM or Javassist get bytecode and new InputSream</span>
<span class="c1">// eg. in = new ByteArrayInputStream(ctClass.toBytecode());</span>
<span class="n">InputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="n">URL</span><span class="o">(</span><span class="s">&quot;your.class.file.class&quot;</span><span class="o">).</span><span class="na">openStream</span><span class="o">();</span>

<span class="kt">byte</span><span class="o">[]</span> <span class="n">result</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="k">try</span> <span class="o">{</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">streamTransform</span><span class="o">.</span><span class="na">transform</span><span class="o">(</span><span class="s">&quot;your.class.name&quot;</span><span class="o">,</span> <span class="n">in</span><span class="o">);</span><span class="c1">//class must be not loaded by classLoader</span>
<span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
  <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
<span class="k">if</span> <span class="o">(</span><span class="n">result</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">throw</span> <span class="k">new</span> <span class="n">CannotCompileException</span><span class="o">(</span><span class="s">&quot;ebean enhance model fail!&quot;</span><span class="o">);</span>
<span class="o">}</span>
<span class="n">defineClass</span><span class="o">(</span><span class="s">&quot;your.class.name&quot;</span><span class="o">,</span> <span class="n">result</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">result</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
</pre></div>
</div>

</div>
</div>


    </div>

    <div class="col-md-3" role="complementary">
      <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
        <ul class="nav bs-docs-sidenav">

<li class="active">
  <a href="/docs/setup/enhancement">Enhancement</a>
<ul class="nav">
  <li><a href="#idea">IDE</a></li>
  <li><a href="#maven">Maven</a></li>
  <li><a href="#agent">Agent</a></li>
  <li><a href="#ant">Ant</a></li>
</ul>
</li>
<li >
  <a href="/docs/setup/eclipse-apt">Eclipse IDE - APT</a>
</li>
<li >
  <a href="/docs/setup/logging">Logging</a>
</li>
<li >
  <a href="/docs/setup/serverconfig">ServerConfig</a>
</li>
<li >
  <a href="/docs/setup/guice">Guice</a>
</li>
<li >
  <a href="/docs/setup/spring">Spring</a>
</li>
<li >
  <a href="/docs/setup/activerecord">Active Record</a>
</li>
<li >
  <a href="/docs/setup/ddl-create-all">DDL - Create All</a>
</li>
<li >
  <a href="/docs/setup/dbmigration">DDL - DB Migration</a>
</li>
<li >
  <a href="/docs/setup/test-properties"> Test properties</a>
</li>
<li >
  <a href="/docs/setup/testing">Testing</a>
</li>
        </ul>
      </nav>
    </div>
  </div>

</div>
<!-- /.row -->
</div>  <!-- /.container -->


  </div>
</div>


<footer id="footer">
  <div class="doc-footer">
    <ul class="doc-footer-links">
      <li><a href="/">Ebean ORM</a></li>
      <li> | </li>
      <li><a href="http://avaje-metric.github.io">Metrics</a></li>
    </ul>
  </div>
</footer>

  <script type="text/javascript">
    var categoryNames = {};
  </script>

  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/jquery.easing.min.js"></script>

    <script src="/js/jquery.storageapi.min.js"></script>
  <script src="/js/ebean-site.js"></script>
  <script src="/js/extra.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75181644-1', 'auto');
    ga('send', 'pageview');

  </script>

</body>
</html>
